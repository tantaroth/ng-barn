{"version":3,"file":"ng-barn.js.map","sources":["ng://ng-barn/lib/ng-barn.service.ts","ng://ng-barn/lib/ng-barn.component.ts","ng://ng-barn/lib/components/ng-barn-form/ng-barn-form.component.ts","ng://ng-barn/lib/ng-barn.module.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\n\nimport { Config } from './models/config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgBarnService {\n\n  private key: string;\n  private store: object = {};\n  private options: object = {};\n\n  constructor(\n    @Inject('config') private config: Config\n  ) {\n    if (\n      config.store &&\n      typeof config.store === 'object' &&\n      Object.keys(config.store).length > 0\n    ) {\n      this.store = { ...this.store, ...config.store };\n    }\n  }\n\n  hot() {\n    return {\n      key: this.key,\n      store: this.store\n    };\n  }\n\n  select(key: string, options?: object) {\n    this.key = key;\n    this.options = options;\n  }\n\n  get(key?: string) {\n    return this.store[key || this.key];\n  }\n\n  set(data: object, key?: string) {\n    this.store[key || this.key] = data;\n\n    return this.store[key || this.key];\n  }\n\n  push(data: object, key?: string) {\n    this.store[key || this.key].push(data);\n\n    return this.store[key || this.key];\n  }\n\n  update(index: number, data: object, key?: string) {\n    this.store[key || this.key][index] = { ...this.store[key || this.key][index], ...data};\n\n    return this.store[key || this.key];\n  }\n\n  delete(index: number, key?: string) {\n    this.store[key || this.key].splice(index, 1);\n\n    return this.store[key || this.key];\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tnt-ng-barn',\n  template: `\n    <p>\n      ng-barn works!\n    </p>\n  `,\n  styles: []\n})\nexport class NgBarnComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { NgBarnService } from '../../ng-barn.service';\n\nimport { Config } from '../../models/config';\n\n@Component({\n  selector: 'tnt-ng-barn-form',\n  templateUrl: './ng-barn-form.component.html',\n  styleUrls: ['./ng-barn-form.component.css']\n})\nexport class NgBarnFormComponent implements OnInit {\n\n  private saved: boolean;\n  private editing: boolean;\n\n  @Input() index: number;\n  @Input() formGroup: FormGroup;\n  @Input() guardSave: boolean;\n\n  @Output() submitting: EventEmitter<any[]> = new EventEmitter();\n  @Output() submitted: EventEmitter<boolean> = new EventEmitter();\n\n  @HostListener('window:beforeunload', ['$event'])\n  beforeUnloadHander(event) {\n      if (this.guardSave) {\n          if (this.editing && !this.saved) {\n              event.returnValue = true;\n          }\n      }\n  }\n  @HostListener('document:keydown', ['$event'])\n  onKeydownHandler(event: KeyboardEvent) {\n      if (this.guardSave) {\n          const target: any = event.target;\n          if (\n              target.tagName === 'INPUT' ||\n              target.tagName === 'TEXTAREA'\n          ) {\n              this.editing = true;\n              this.saved = undefined;\n          }\n      }\n  }\n\n  constructor(\n      private store: NgBarnService\n  ) {\n      const config: Config = store.hot();\n\n      store.select(config.key);\n  }\n\n  ngOnInit() {\n  }\n\n  onSubmit(index) {\n      this.submitted.emit(false);\n\n      if (this.formGroup.valid) {\n          let response: object[] = [];\n\n          if (typeof index === 'number') {\n              response = this.store.update(index, this.formGroup.value);\n          } else {\n              response = this.store.push(this.formGroup.value);\n          }\n\n          this.submitting.emit(response);\n          this.submitted.emit(true);\n          this.saved = true;\n          this.editing = undefined;\n      }\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { NgBarnService } from './ng-barn.service';\n\nimport { NgBarnComponent } from './ng-barn.component';\nimport { NgBarnFormComponent } from './components/ng-barn-form/ng-barn-form.component';\n\nimport { Config } from './models/config';\n\n@NgModule({\n  imports: [FormsModule, ReactiveFormsModule],\n  declarations: [NgBarnComponent, NgBarnFormComponent],\n  exports: [NgBarnComponent, NgBarnFormComponent]\n})\nexport class NgBarnModule {\n  static forRoot(config: Config): ModuleWithProviders {\n    return {\n      ngModule: NgBarnModule,\n      providers: [NgBarnService, { provide: 'config', useValue: config }]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
