{"version":3,"file":"ng-barn.js.map","sources":["ng://ng-barn/lib/store.service.ts","ng://ng-barn/lib/ng-barn.component.ts","ng://ng-barn/lib/components/ng-barn-form/ng-barn-form.component.ts","ng://ng-barn/lib/ng-barn.module.ts"],"sourcesContent":["import { Injectable, Inject } from \"@angular/core\";\n\nimport { Config } from \"./models/config\";\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class StoreService {\n  private key: string;\n  private store: object = {};\n  private options: object = {};\n\n  constructor(@Inject(\"config\") private config: Config) {\n    if (\n      config.store &&\n      typeof config.store === \"object\" &&\n      Object.keys(config.store).length > 0\n    ) {\n      this.store = { ...this.store, ...config.store };\n    }\n  }\n\n  hot() {\n    return {\n      key: this.key,\n      store: this.store\n    };\n  }\n\n  select(key: string, options?: object) {\n    this.key = key;\n    this.options = options;\n  }\n\n  get(key?: string) {\n    return this.store[key || this.key];\n  }\n\n  set(data: object, key?: string) {\n    const frozenList = this.store[key || this.key];\n\n    this.store[key || this.key] = data;\n\n    const response = this.store[key || this.key];\n\n    Object.defineProperty(response, \"previous\", {\n      value: {\n        list: frozenList\n      },\n      writable: false\n    });\n\n    return response;\n  }\n\n  push(data: object, key?: string) {\n    const frozenList = this.store[key || this.key];\n\n    this.store[key || this.key].push(data);\n\n    const index = this.store[key || this.key].length - 1;\n    const response = this.store[key || this.key];\n\n    Object.defineProperty(response, \"index\", {\n      value: index,\n      enumerable: true,\n      writable: false\n    });\n\n    Object.defineProperty(response, \"previous\", {\n      value: {\n        data: frozenList[index],\n        list: frozenList\n      },\n      writable: false\n    });\n\n    return response;\n  }\n\n  update(index: number, data: object, key?: string) {\n    const frozenList = this.store[key || this.key];\n\n    this.store[key || this.key][index] = {\n      ...this.store[key || this.key][index],\n      ...data\n    };\n\n    const response = this.store[key || this.key];\n\n    Object.defineProperty(response, \"index\", {\n      value: index,\n      enumerable: true,\n      writable: false\n    });\n\n    Object.defineProperty(response, \"previous\", {\n      value: {\n        data: frozenList[index],\n        list: frozenList\n      },\n      writable: false\n    });\n\n    return response;\n  }\n\n  delete(index: number, key?: string) {\n    const frozenList = this.store[key || this.key];\n\n    this.store[key || this.key].splice(index, 1);\n\n    const response = this.store[key || this.key];\n\n    Object.defineProperty(response, \"index\", {\n      value: index,\n      enumerable: true,\n      writable: false\n    });\n\n    Object.defineProperty(response, \"previous\", {\n      value: {\n        data: frozenList[index],\n        list: frozenList\n      },\n      writable: false\n    });\n\n    return response;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tnt-ng-barn',\n  template: `\n    <p>\n      ng-barn works!\n    </p>\n  `,\n  styles: []\n})\nexport class NgBarnComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  Output,\n  EventEmitter,\n  HostListener\n} from \"@angular/core\";\nimport { FormGroup } from \"@angular/forms\";\n\nimport { StoreService } from \"../../store.service\";\n\nimport { Config } from \"../../models/config\";\n\n@Component({\n  selector: \"tnt-barn-form\",\n  templateUrl: \"./ng-barn-form.component.html\",\n  styleUrls: [\"./ng-barn-form.component.css\"]\n})\nexport class NgBarnFormComponent implements OnInit {\n  private saved: boolean;\n  private editing: boolean;\n\n  @Input() index: number;\n  @Input() formGroup: FormGroup;\n  @Input() guardSave: boolean;\n\n  @Output() submitting: EventEmitter<object> = new EventEmitter();\n  @Output() submitted: EventEmitter<boolean> = new EventEmitter();\n\n  @HostListener(\"window:beforeunload\", [\"$event\"])\n  beforeUnloadHander(event) {\n    if (this.guardSave) {\n      if (this.editing && !this.saved) {\n        event.returnValue = true;\n      }\n    }\n  }\n  @HostListener(\"document:keydown\", [\"$event\"])\n  onKeydownHandler(event: KeyboardEvent) {\n    if (this.guardSave) {\n      const target: any = event.target;\n      if (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\") {\n        this.editing = true;\n        this.saved = undefined;\n      }\n    }\n  }\n\n  constructor(private store: StoreService) {\n    const config: Config = store.hot();\n\n    store.select(config.key);\n  }\n\n  ngOnInit() {}\n\n  onSubmit(index) {\n    this.submitted.emit(false);\n\n    if (this.formGroup.valid) {\n      let response: object = {};\n\n      if (typeof index === \"number\") {\n        response = this.store.update(index, this.formGroup.value);\n      } else {\n        response = this.store.push(this.formGroup.value);\n      }\n\n      this.submitting.emit(response);\n      this.submitted.emit(true);\n      this.saved = true;\n      this.editing = undefined;\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { StoreService } from './store.service';\n\nimport { NgBarnComponent } from './ng-barn.component';\nimport { NgBarnFormComponent } from './components/ng-barn-form/ng-barn-form.component';\n\nimport { Config } from './models/config';\n\n@NgModule({\n  imports: [FormsModule, ReactiveFormsModule],\n  declarations: [NgBarnComponent, NgBarnFormComponent],\n  exports: [NgBarnComponent, NgBarnFormComponent]\n})\nexport class NgBarnModule {\n  static forRoot(config: Config): ModuleWithProviders {\n    return {\n      ngModule: NgBarnModule,\n      providers: [StoreService, { provide: 'config', useValue: config }]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
